(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"39/6":function(t,e,c){"use strict";c.r(e),c.d(e,"ProductModule",function(){return Rt});var o=c("Yj9t"),i=c("ofXK"),r=c("ahUO"),n=c("Tk1w"),b=c("yHTb"),a=c("fXoL"),s=c("Gdn9"),d=c("G0yt"),l=c("tyNb"),u=c("yx6F"),p=c("s7LF");const g=function(){return["/product/"]};function v(t,e){1&t&&(a.Pb(0,"button",22),a.Lb(1,"i",23),a.vc(2,"A\xf1adir Producto"),a.Ob()),2&t&&a.gc("routerLink",a.jc(1,g))}function P(t,e){1&t&&(a.Pb(0,"div"),a.vc(1," No hay Productos que mostrar. "),a.Ob())}function f(t,e){if(1&t&&a.Lb(0,"img",38),2&t){const t=a.bc().$implicit;a.gc("src","http://localhost:3000/"+t.picture,a.qc)}}function h(t,e){1&t&&(a.Pb(0,"span"),a.vc(1,"/ "),a.Ob())}function m(t,e){if(1&t&&(a.Pb(0,"span",25),a.vc(1),a.Ob()),2&t){const t=a.bc().$implicit;a.yb(1),a.wc(t.promotion)}}function O(t,e){if(1&t){const t=a.Qb();a.Pb(0,"span",39),a.Zb("click",function(){a.pc(t);const e=a.bc().$implicit,c=a.oc(27),o=a.bc(2);return c.click(),o.desactivarProd(e)}),a.vc(1,"Activo"),a.Ob()}}function y(t,e){if(1&t){const t=a.Qb();a.Pb(0,"span",40),a.Zb("click",function(){a.pc(t);const e=a.bc().$implicit,c=a.oc(27),o=a.bc(2);return c.click(),o.activarProd(e)}),a.vc(1,"Inactivo"),a.Ob()}}function S(t,e){if(1&t){const t=a.Qb();a.Pb(0,"tr"),a.Pb(1,"td"),a.Pb(2,"a",27),a.Pb(3,"strong"),a.vc(4),a.Ob(),a.Ob(),a.tc(5,f,1,1,"ng-template",null,28,a.uc),a.Ob(),a.Pb(7,"td"),a.vc(8),a.Ob(),a.Pb(9,"td"),a.vc(10),a.Ob(),a.Pb(11,"td"),a.vc(12),a.tc(13,h,2,0,"span",6),a.tc(14,m,2,1,"span",29),a.Ob(),a.Pb(15,"td"),a.vc(16),a.Ob(),a.Pb(17,"td"),a.vc(18),a.Ob(),a.Pb(19,"td"),a.vc(20),a.Ob(),a.Pb(21,"td"),a.vc(22),a.Ob(),a.Pb(23,"td",30),a.tc(24,O,2,0,"span",31),a.tc(25,y,2,0,"span",32),a.Pb(26,"input",33,34),a.Zb("ngModelChange",function(t){return e.$implicit.storeActive=t}),a.Ob(),a.Pb(28,"i",35),a.Zb("click",function(){a.pc(t);const c=e.$implicit,o=a.oc(30),i=a.bc(2);return o.click(),i.selectProduct(c)}),a.Ob(),a.Lb(29,"button",36,37),a.Ob(),a.Ob()}if(2&t){const t=e.$implicit,c=a.oc(6);a.yb(2),a.hc("popoverTitle",t.name),a.gc("ngbPopover",c),a.yb(2),a.wc(t.name),a.yb(4),a.wc(t.code),a.yb(2),a.wc(t.description),a.yb(2),a.xc(" ",t.price," "),a.yb(1),a.gc("ngIf",t.promotion>0),a.yb(1),a.gc("ngIf",t.promotion>0),a.yb(2),a.wc(t.weigth),a.yb(2),a.wc(t.kind),a.yb(2),a.wc(t.subCategory),a.yb(2),a.wc(t.storeAvailability),a.yb(2),a.gc("ngIf",t.storeActive),a.yb(1),a.gc("ngIf",!t.storeActive),a.yb(1),a.gc("ngModel",t.storeActive)}}function I(t,e){if(1&t&&(a.Pb(0,"table",24),a.Pb(1,"thead"),a.Pb(2,"tr"),a.Pb(3,"th"),a.vc(4,"Nombre"),a.Ob(),a.Pb(5,"th"),a.vc(6,"C\xf3digo"),a.Ob(),a.Pb(7,"th"),a.vc(8,"Descripci\xf3n"),a.Ob(),a.Pb(9,"th"),a.vc(10,"Precio / "),a.Pb(11,"span",25),a.vc(12,"Promoci\xf3n"),a.Ob(),a.Ob(),a.Pb(13,"th"),a.vc(14,"Peso"),a.Ob(),a.Pb(15,"th"),a.vc(16,"Categor\xeda"),a.Ob(),a.Pb(17,"th"),a.vc(18,"SubCategor\xeda"),a.Ob(),a.Pb(19,"th"),a.vc(20,"Cantidad"),a.Ob(),a.Pb(21,"th"),a.vc(22,"Acciones"),a.Ob(),a.Ob(),a.Ob(),a.Pb(23,"tbody"),a.tc(24,S,31,15,"tr",26),a.Ob(),a.Pb(25,"tfoot"),a.Pb(26,"tr"),a.Pb(27,"th"),a.vc(28,"Nombre"),a.Ob(),a.Pb(29,"th"),a.vc(30,"C\xf3digo"),a.Ob(),a.Pb(31,"th"),a.vc(32,"Descripci\xf3n"),a.Ob(),a.Pb(33,"th"),a.vc(34,"Precio / "),a.Pb(35,"span",25),a.vc(36,"Promoci\xf3n"),a.Ob(),a.Ob(),a.Pb(37,"th"),a.vc(38,"Peso"),a.Ob(),a.Pb(39,"th"),a.vc(40,"Categor\xeda"),a.Ob(),a.Pb(41,"th"),a.vc(42,"SubCategor\xeda"),a.Ob(),a.Pb(43,"th"),a.vc(44,"Cantidad"),a.Ob(),a.Pb(45,"th"),a.vc(46,"Acciones"),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&t){const t=a.bc();a.yb(24),a.gc("ngForOf",t.products)}}function k(t,e){1&t&&(a.Pb(0,"li",43),a.Pb(1,"a",48),a.vc(2,"..."),a.Ob(),a.Ob())}function w(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",49),a.Zb("click",function(){a.pc(t);const e=a.bc(2);return e.getProducts(e.beforepage-1)}),a.Pb(1,"a",48),a.vc(2),a.Ob(),a.Ob()}if(2&t){const t=a.bc(2);a.yb(2),a.wc(t.beforepage-1)}}function C(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",49),a.Zb("click",function(){a.pc(t);const e=a.bc(2);return e.getProducts(e.beforepage)}),a.Pb(1,"a",48),a.vc(2),a.Ob(),a.Ob()}if(2&t){const t=a.bc(2);a.yb(2),a.wc(t.beforepage)}}function x(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",49),a.Zb("click",function(){a.pc(t);const e=a.bc(2);return e.getProducts(e.nextpage)}),a.Pb(1,"a",48),a.vc(2),a.Ob(),a.Ob()}if(2&t){const t=a.bc(2);a.yb(2),a.wc(t.nextpage)}}function M(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",49),a.Zb("click",function(){a.pc(t);const e=a.bc(2);return e.getProducts(e.nextpage+1)}),a.Pb(1,"a",48),a.vc(2),a.Ob(),a.Ob()}if(2&t){const t=a.bc(2);a.yb(2),a.wc(t.nextpage+1)}}function A(t,e){1&t&&(a.Pb(0,"li",43),a.Pb(1,"a",48),a.vc(2,"..."),a.Ob(),a.Ob())}function Z(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",41),a.Pb(1,"ul",42),a.Pb(2,"li",43),a.Pb(3,"a",44),a.Zb("click",function(){return a.pc(t),a.bc().getProducts(1)}),a.vc(4,"\xab"),a.Ob(),a.Ob(),a.tc(5,k,3,0,"li",45),a.tc(6,w,3,1,"li",46),a.tc(7,C,3,1,"li",46),a.Pb(8,"li",47),a.Pb(9,"a",48),a.vc(10),a.Ob(),a.Ob(),a.tc(11,x,3,1,"li",46),a.tc(12,M,3,1,"li",46),a.tc(13,A,3,0,"li",45),a.Pb(14,"li",43),a.Pb(15,"a",44),a.Zb("click",function(){a.pc(t);const e=a.bc();return e.getProducts(e.pages)}),a.vc(16,"\xbb"),a.Ob(),a.Ob(),a.Ob(),a.Ob()}if(2&t){const t=a.bc();a.yb(5),a.gc("ngIf",t.currentPage>3),a.yb(1),a.gc("ngIf",t.currentPage>2),a.yb(1),a.gc("ngIf",t.currentPage>1),a.yb(3),a.wc(t.currentPage),a.yb(1),a.gc("ngIf",t.currentPage<t.pages),a.yb(1),a.gc("ngIf",t.currentPage<t.pages-1),a.yb(1),a.gc("ngIf",t.currentPage<t.pages-2)}}function L(t,e){1&t&&(a.Pb(0,"div"),a.vc(1,"Crear"),a.Ob())}function Q(t,e){1&t&&(a.Pb(0,"div"),a.vc(1,"Actualizar"),a.Ob())}function F(t,e){if(1&t){const t=a.Qb();a.Pb(0,"button",50),a.Zb("click",function(){return a.pc(t),a.bc().Promocion(0)}),a.vc(1,"Eliminar"),a.Ob()}}let $=(()=>{class t{constructor(t,e,c,o){this.productService=t,this.route=c,this.helpService=o,this.promotion=0,this.prom=0,e.placement="right",e.triggers="hover"}ngOnInit(){this.getProducts()}getProducts(t){t||(t=1),this.productService.getProductsInStore(t).subscribe(t=>{this.products=t.product,this.pages=t.pages,this.currentPage=t.current,this.beforepage=this.currentPage-1,this.nextpage=this.beforepage+2})}activarProd(t){t.storeActive=!0,this.productService.updateProduct(t).subscribe(t=>{console.log(t)},t=>console.log(t))}desactivarProd(t){t.storeActive=!1,this.productService.updateProduct(t).subscribe(t=>{console.log(t)},t=>console.log(t))}selectProduct(t){this.productService.selectedProduct=t,this.promotion=t.promotion}crearPromotion(){return 0==this.promotion||null==this.promotion||null==this.promotion}Promocion(t){this.prom<0||this.prom>this.productService.selectedProduct.price?this.helpService.showNotif("Error, el valor de la promoci\xf3n debe ser mayor a 0 y menor que el precio original del producto."):(this.productService.selectedProduct.promotion=this.prom,0==t&&(this.productService.selectedProduct.promotion=0),this.productService.updateProduct(this.productService.selectedProduct).subscribe(t=>{this.productService.selectedProduct=new b.a,this.helpService.showNotif("Producto Guardado."),this.promotion=0},t=>{console.log(t)}))}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(s.a),a.Kb(d.d),a.Kb(l.a),a.Kb(u.a))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-list-almacen"]],decls:31,vars:9,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"fas","fa-stream","mr-1"],["class","btn btn-primary","style","float: right;",3,"routerLink",4,"ngIf"],[1,"card-body"],[4,"ngIf"],["id","example1","class","table table-bordered table-striped",4,"ngIf"],["class","card-footer",4,"ngIf"],["id","myModal",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body"],["type","number","placeholder","Peso","name","promotion","id","promotion","required","",1,"form-control","form-control-user",3,"ngModel","ngModelChange"],["promotion","ngModel"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","class","btn btn-warning","data-dismiss","modal",3,"click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],[1,"btn","btn-primary",2,"float","right",3,"routerLink"],[1,"nav-icon","fas","fa-plus","mr-1"],["id","example1",1,"table","table-bordered","table-striped"],["data-toggle","tooltip","title","Producto en promoci\xf3n.",1,"badge","badge-primary",2,"font-size","15px"],[4,"ngFor","ngForOf"],[3,"ngbPopover","popoverTitle"],["imagen",""],["data-toggle","tooltip","style","font-size:15px;","title","Producto en promoci\xf3n.","class","badge badge-primary",4,"ngIf"],[2,"width","150px"],["data-toggle","tooltip","style","font-size:15px; cursor: pointer;","title","Producto disponible","class","badge badge-primary",3,"click",4,"ngIf"],["data-toggle","tooltip","style","font-size:15px; cursor: pointer;","title","Producto no disponible","class","badge badge-danger",3,"click",4,"ngIf"],["type","checkbox",1,"checkbox","d-none",3,"ngModel","ngModelChange"],["checkbox",""],["title","Promoci\xf3n",1,"fas","fa-hand-holding-usd","ml-2",2,"font-size","24px","cursor","pointer",3,"click"],["type","button","hidden","","data-toggle","modal","data-target","#myModal",1,"btn","btn-primary"],["modal",""],["width","100%","height","100%","alt","",3,"src"],["data-toggle","tooltip","title","Producto disponible",1,"badge","badge-primary",2,"font-size","15px","cursor","pointer",3,"click"],["data-toggle","tooltip","title","Producto no disponible",1,"badge","badge-danger",2,"font-size","15px","cursor","pointer",3,"click"],[1,"card-footer"],[1,"pagination","pagination-md",2,"float","right"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",4,"ngIf"],["class","page-item",3,"click",4,"ngIf"],[1,"page-item","active"],[1,"page-link"],[1,"page-item",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Pb(1,"div",1),a.Pb(2,"h3",2),a.Lb(3,"i",3),a.vc(4,"Listado de Productos Almac\xe9n"),a.Ob(),a.tc(5,v,3,2,"button",4),a.Ob(),a.Pb(6,"div",5),a.tc(7,P,2,0,"div",6),a.tc(8,I,47,1,"table",7),a.Ob(),a.tc(9,Z,17,7,"div",8),a.Ob(),a.Pb(10,"div",9),a.Pb(11,"div",10),a.Pb(12,"div",11),a.Pb(13,"div",12),a.Pb(14,"h4",13),a.vc(15,"Crear Promoci\xf3n"),a.Ob(),a.Pb(16,"button",14),a.vc(17,"\xd7"),a.Ob(),a.Ob(),a.Pb(18,"div",15),a.vc(19," Crear Promoci\xf3n para el producto: "),a.Pb(20,"strong"),a.vc(21),a.Ob(),a.Pb(22,"input",16,17),a.Zb("ngModelChange",function(t){return e.prom=t}),a.Ob(),a.Ob(),a.Pb(24,"div",18),a.Pb(25,"button",19),a.Zb("click",function(){return e.Promocion()}),a.tc(26,L,2,0,"div",6),a.tc(27,Q,2,0,"div",6),a.Ob(),a.tc(28,F,2,0,"button",20),a.Pb(29,"button",21),a.vc(30,"Close"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&t&&(a.yb(5),a.gc("ngIf",e.helpService.isInRole("Administrador")),a.yb(2),a.gc("ngIf",e.products.length<1),a.yb(1),a.gc("ngIf",e.products.length>0),a.yb(1),a.gc("ngIf",e.products.length>0),a.yb(12),a.wc(e.productService.selectedProduct.name),a.yb(1),a.gc("ngModel",e.prom),a.yb(4),a.gc("ngIf",e.crearPromotion()),a.yb(1),a.gc("ngIf",!e.crearPromotion()),a.yb(1),a.gc("ngIf",!e.crearPromotion()))},directives:[i.j,p.p,p.b,p.r,p.k,p.n,l.b,i.i,d.c,p.a],styles:[".page-item[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();function N(t,e){1&t&&(a.Pb(0,"div"),a.vc(1," No hay elementos para mostrar. "),a.Ob())}function _(t,e){if(1&t&&(a.Pb(0,"h5"),a.Pb(1,"strong"),a.vc(2),a.Ob(),a.Ob()),2&t){const t=a.bc().$implicit;a.yb(2),a.xc("Precio: $",t.price,"")}}function R(t,e){if(1&t&&(a.Pb(0,"h5"),a.Pb(1,"strong"),a.vc(2,"Precio:"),a.Pb(3,"del"),a.vc(4),a.Ob(),a.Pb(5,"span",34),a.vc(6),a.Ob(),a.Ob(),a.Ob()),2&t){const t=a.bc().$implicit;a.yb(4),a.xc(" $",t.price,""),a.yb(2),a.xc("$",t.promotion,"")}}function z(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",15),a.Pb(1,"div",2),a.Pb(2,"h5",3),a.vc(3),a.Ob(),a.Pb(4,"div",16),a.Pb(5,"span",17),a.vc(6),a.Ob(),a.Pb(7,"button",18),a.Lb(8,"i",19),a.Ob(),a.Pb(9,"button",20),a.Lb(10,"i",21),a.Ob(),a.Pb(11,"button",22),a.Lb(12,"i",23),a.Ob(),a.Ob(),a.Ob(),a.Pb(13,"div",5),a.Lb(14,"img",24),a.Pb(15,"div",25),a.Pb(16,"h3"),a.vc(17,"Detalles del Producto:"),a.Ob(),a.Pb(18,"p"),a.Pb(19,"strong"),a.vc(20,"Descripci\xf3n:"),a.Ob(),a.vc(21),a.Ob(),a.Pb(22,"p"),a.Pb(23,"strong"),a.vc(24,"Categor\xeda:"),a.Ob(),a.vc(25),a.Ob(),a.Pb(26,"p"),a.Pb(27,"strong"),a.vc(28,"SubCategor\xeda:"),a.Ob(),a.vc(29),a.Ob(),a.Pb(30,"p"),a.Pb(31,"strong"),a.vc(32,"Peso:"),a.Ob(),a.vc(33),a.Ob(),a.Ob(),a.Ob(),a.Pb(34,"div",26),a.Pb(35,"form",27),a.Zb("submit",function(){a.pc(t);const c=e.$implicit,o=a.oc(42);return a.bc(3).submit(o,c)}),a.Pb(36,"div",11),a.Pb(37,"div",28),a.tc(38,_,3,1,"h5",8),a.tc(39,R,7,2,"h5",8),a.Ob(),a.Pb(40,"div",29),a.Lb(41,"input",30,31),a.Pb(43,"span",32),a.Pb(44,"button",33),a.vc(45,"A\xf1adir"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()}if(2&t){const t=e.$implicit;a.yb(3),a.wc(t.name),a.yb(3),a.wc(t.storeAvailability),a.yb(8),a.gc("src","http://localhost:3000/"+t.picture,a.qc),a.yb(7),a.xc(" ",t.description,""),a.yb(4),a.xc(" ",t.kind,""),a.yb(4),a.xc(" ",t.subCategory,""),a.yb(4),a.xc(" ",t.weigth,""),a.yb(5),a.gc("ngIf",!t.promotion>0),a.yb(1),a.gc("ngIf",t.promotion>0)}}function K(t,e){if(1&t&&(a.Pb(0,"section",13),a.tc(1,z,46,9,"div",14),a.Ob()),2&t){const t=e.$implicit;a.yb(1),a.gc("ngForOf",t)}}function q(t,e){if(1&t&&(a.Pb(0,"div",11),a.tc(1,K,2,1,"section",12),a.Ob()),2&t){const t=a.bc();a.yb(1),a.gc("ngForOf",t.helpService.showProducts)}}function D(t,e){1&t&&(a.Pb(0,"li",36),a.Pb(1,"a",41),a.vc(2,"..."),a.Ob(),a.Ob())}function T(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",42),a.Zb("click",function(){a.pc(t);const e=a.bc(2);return e.pagination(e.helpService.beforepage-1)}),a.Pb(1,"a",41),a.vc(2),a.Ob(),a.Ob()}if(2&t){const t=a.bc(2);a.yb(2),a.wc(t.helpService.beforepage-1)}}function E(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",42),a.Zb("click",function(){a.pc(t);const e=a.bc(2);return e.pagination(e.helpService.beforepage)}),a.Pb(1,"a",41),a.vc(2),a.Ob(),a.Ob()}if(2&t){const t=a.bc(2);a.yb(2),a.wc(t.helpService.beforepage)}}function j(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",42),a.Zb("click",function(){a.pc(t);const e=a.bc(2);return e.pagination(e.helpService.nextpage)}),a.Pb(1,"a",41),a.vc(2),a.Ob(),a.Ob()}if(2&t){const t=a.bc(2);a.yb(2),a.wc(t.helpService.nextpage)}}function G(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",42),a.Zb("click",function(){a.pc(t);const e=a.bc(2);return e.pagination(e.helpService.nextpage+1)}),a.Pb(1,"a",41),a.vc(2),a.Ob(),a.Ob()}if(2&t){const t=a.bc(2);a.yb(2),a.wc(t.helpService.nextpage+1)}}function H(t,e){1&t&&(a.Pb(0,"li",36),a.Pb(1,"a",41),a.vc(2,"..."),a.Ob(),a.Ob())}function J(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",26),a.Pb(1,"ul",35),a.Pb(2,"li",36),a.Pb(3,"a",37),a.Zb("click",function(){return a.pc(t),a.bc().pagination(1)}),a.vc(4,"\xab"),a.Ob(),a.Ob(),a.tc(5,D,3,0,"li",38),a.tc(6,T,3,1,"li",39),a.tc(7,E,3,1,"li",39),a.Pb(8,"li",40),a.Pb(9,"a",41),a.vc(10),a.Ob(),a.Ob(),a.tc(11,j,3,1,"li",39),a.tc(12,G,3,1,"li",39),a.tc(13,H,3,0,"li",38),a.Pb(14,"li",36),a.Pb(15,"a",37),a.Zb("click",function(){a.pc(t);const e=a.bc();return e.pagination(e.helpService.pages)}),a.vc(16,"\xbb"),a.Ob(),a.Ob(),a.Ob(),a.Ob()}if(2&t){const t=a.bc();a.yb(5),a.gc("ngIf",t.helpService.currentPage>3),a.yb(1),a.gc("ngIf",t.helpService.currentPage>2),a.yb(1),a.gc("ngIf",t.helpService.currentPage>1),a.yb(3),a.wc(t.helpService.currentPage),a.yb(1),a.gc("ngIf",t.helpService.currentPage<t.helpService.pages),a.yb(1),a.gc("ngIf",t.helpService.currentPage<t.helpService.pages-1),a.yb(1),a.gc("ngIf",t.helpService.currentPage<t.helpService.pages-2)}}let U=(()=>{class t{constructor(t,e,c){this.productService=t,this.helpService=e,c.placement="right",c.triggers="hover"}ngOnInit(){}submit(t,e){if(t.value&&parseFloat(t.value)>0)var c=parseFloat(t.value);else c=1;if(c<=e.storeAvailability){var o=!1,i=e._id,r=e.name,n=!0,b=0;if(b=e.promotion>0?e.promotion:e.price,null==this.productService.CarProducts)b=0,this.productService.CarProducts=[[e,c,b=e.promotion>0?e.promotion:e.price]];else{for(let t=0;t<this.productService.CarProducts.length;t++)this.productService.CarProducts[t][0]._id==i&&(this.productService.CarProducts[t][1]+c<=e.storeAvailability?(this.productService.CarProducts[t][1]=this.productService.CarProducts[t][1]+c,t=this.productService.CarProducts.length):(this.helpService.showNotif("Hay "+this.productService.CarProducts[t][1]+" de este elemento en el carrito y "+e.storeAvailability+" en el almac\xe9n. No puede agregar m\xe1s productos de los que hay en existencia."),n=!1),o=!0);o||(b=0,this.productService.CarProducts.push([e,c,b=e.promotion>0?e.promotion:e.price]))}n&&(this.productService.totalCarProducts=this.productService.totalCarProducts+c,this.productService.precioTotCarProducts=this.productService.precioTotCarProducts+b*c,"Ropa"==e.kind&&(this.productService.totalRopa=this.productService.totalRopa+c,this.productService.precioRopa=this.productService.precioRopa+b*c),"Muebles"==e.kind&&(this.productService.totalMueble=this.productService.totalMueble+c,this.productService.precioMueble=this.productService.precioMueble+b*c),"Tecnolog\xeda"==e.kind&&(this.productService.totalTecnologia=this.productService.totalTecnologia+c,this.productService.precioTecnologia=this.productService.precioTecnologia+b*c),"Comida"==e.kind&&(this.productService.totalComida=this.productService.totalComida+c,this.productService.precioComida=this.productService.precioComida+b*c),this.helpService.showNotif("Se a\xf1adi\xf3 "+c+" elemento de "+r))}else this.helpService.showNotif("Hay"+e.storeAvailability+" en el almac\xe9n del producto:"+e.name)}pagination(t){var e=this.helpService.SubCate;t<=this.helpService.pages&&t>0&&(this.helpService.IsCategory?this.helpService.getProductsCat(t,e):this.helpService.getProducts(t,e))}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(s.a),a.Kb(u.a),a.Kb(d.d))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-list-category"]],features:[a.xb([d.d])],decls:12,vars:4,consts:[[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"fas","fa-th-large","mr-1"],[1,"card-body"],[1,"tab-content","p-0"],["id","revenue-chart1",1,"chart","tab-pane","active",2,"position","relative","height","auto"],[4,"ngIf"],["class","row",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"row"],["class","col-lg-4 connectedSortable",4,"ngFor","ngForOf"],[1,"col-lg-4","connectedSortable"],["class","card direct-chat direct-chat-primary",4,"ngFor","ngForOf"],[1,"card","direct-chat","direct-chat-primary"],[1,"card-tools"],["ngbPopover","Disponible en el Almac\xe9n",1,"badge","badge-primary",2,"font-size","15px"],["type","button","data-card-widget","collapse",1,"btn","btn-tool"],[1,"fas","fa-minus"],["type","button","data-toggle","tooltip","title","Details","data-widget","chat-pane-toggle","ngbPopover","Detalles",1,"btn","btn-tool"],[1,"fas","fa-book"],["type","button","data-card-widget","remove",1,"btn","btn-tool"],[1,"fas","fa-times"],["width","100%","height","250px","alt","",3,"src"],[1,"direct-chat-contacts","p-3"],[1,"card-footer"],[3,"submit"],[1,"col-7"],[1,"input-group","col-5","price"],["type","number","name","cant","placeholder","0",1,"form-control",2,"height","40px"],["cantidad",""],[1,"input-group-append"],["type","submit",1,"btn","btn-primary",2,"height","40px"],["data-toggle","tooltip",1,"badge","badge-danger","ml-1"],[1,"pagination","pagination-md",2,"float","right"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",4,"ngIf"],["class","page-item",3,"click",4,"ngIf"],[1,"page-item","active"],[1,"page-link"],[1,"page-item",3,"click"]],template:function(t,e){1&t&&(a.Pb(0,"section",0),a.Pb(1,"div",1),a.Pb(2,"div",2),a.Pb(3,"h4",3),a.Lb(4,"i",4),a.vc(5),a.Ob(),a.Ob(),a.Pb(6,"div",5),a.Pb(7,"div",6),a.Pb(8,"div",7),a.tc(9,N,2,0,"div",8),a.tc(10,q,2,1,"div",9),a.Ob(),a.Ob(),a.Ob(),a.tc(11,J,17,7,"div",10),a.Ob(),a.Ob()),2&t&&(a.yb(5),a.xc(" Listado ",e.helpService.SubCate," "),a.yb(4),a.gc("ngIf",!e.helpService.showProducts[0][0]._id),a.yb(1),a.gc("ngIf",e.helpService.showProducts[0][0]._id),a.yb(1),a.gc("ngIf",e.helpService.showProducts[0][0]._id))},directives:[i.j,i.i,d.c,p.u,p.l,p.m],styles:[".page-item[_ngcontent-%COMP%]{cursor:pointer}.direct-chat-contacts[_ngcontent-%COMP%]{background-color:#fff;color:#000!important}"]}),t})();var W=c("lGQG");const X=function(){return["/product/create"]};function Y(t,e){1&t&&(a.Pb(0,"button",9),a.Lb(1,"i",10),a.vc(2," Nuevo Producto"),a.Ob()),2&t&&a.gc("routerLink",a.jc(1,X))}function B(t,e){1&t&&(a.Pb(0,"div"),a.vc(1," No hay Productos que mostrar. "),a.Ob())}function V(t,e){1&t&&(a.Pb(0,"th"),a.vc(1,"Almac\xe9n"),a.Ob())}function tt(t,e){if(1&t&&a.Lb(0,"img",17),2&t){const t=a.bc().$implicit;a.gc("src","http://localhost:3000/"+t.picture,a.qc)}}function et(t,e){if(1&t&&(a.Pb(0,"td"),a.Pb(1,"span",18),a.vc(2),a.Ob(),a.Ob()),2&t){const t=a.bc().$implicit;a.yb(2),a.wc(t.storeAvailability)}}function ct(t,e){if(1&t){const t=a.Qb();a.Pb(0,"span",28),a.Zb("click",function(){a.pc(t),a.bc();const e=a.oc(4),c=a.bc().$implicit,o=a.bc(2);return e.click(),o.desactivarProd(c)}),a.vc(1,"Activo"),a.Ob()}}function ot(t,e){if(1&t){const t=a.Qb();a.Pb(0,"span",29),a.Zb("click",function(){a.pc(t),a.bc();const e=a.oc(4),c=a.bc().$implicit,o=a.bc(2);return e.click(),o.activarProd(c)}),a.vc(1,"Inactivo"),a.Ob()}}function it(t,e){if(1&t){const t=a.Qb();a.Pb(0,"p",30),a.vc(1,"Est\xe1s seguro de eliminar el elemento?"),a.Ob(),a.Pb(2,"button",31),a.Zb("click",function(){a.pc(t);const e=a.bc(2).$implicit;return a.bc(2).deleteProd(e._id)}),a.vc(3,"Eliminar"),a.Ob(),a.Pb(4,"button",32),a.vc(5,"Cancelar"),a.Ob()}}function rt(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div"),a.tc(1,ct,2,0,"span",19),a.tc(2,ot,2,0,"span",20),a.Pb(3,"input",21,22),a.Zb("ngModelChange",function(e){return a.pc(t),a.bc().$implicit.active=e}),a.Ob(),a.Pb(5,"i",23),a.Zb("click",function(){a.pc(t);const e=a.bc().$implicit;return a.bc(2).edit(e)}),a.Ob(),a.Pb(6,"a",24,25),a.Zb("click",function(){return a.pc(t),a.oc(7).open()}),a.Lb(8,"i",26),a.Ob(),a.tc(9,it,6,0,"ng-template",null,27,a.uc),a.Ob()}if(2&t){const t=a.oc(10),e=a.bc().$implicit;a.yb(1),a.gc("ngIf",e.active),a.yb(1),a.gc("ngIf",!e.active),a.yb(1),a.gc("ngModel",e.active),a.yb(3),a.gc("ngbPopover",t)}}function nt(t,e){if(1&t){const t=a.Qb();a.Pb(0,"form",33),a.Zb("submit",function(){a.pc(t);const e=a.oc(4),c=a.bc().$implicit;return a.bc(2).addStoreProduct(e,c)}),a.Pb(1,"div",34),a.Pb(2,"div",35),a.Lb(3,"input",36,37),a.Pb(5,"span",38),a.Pb(6,"button",39),a.vc(7,"Add"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()}}function bt(t,e){if(1&t&&(a.Pb(0,"tr"),a.Pb(1,"td"),a.Pb(2,"a",13),a.Pb(3,"strong"),a.vc(4),a.Ob(),a.Ob(),a.tc(5,tt,1,1,"ng-template",null,14,a.uc),a.Ob(),a.Pb(7,"td"),a.vc(8),a.Ob(),a.Pb(9,"td"),a.vc(10),a.Ob(),a.Pb(11,"td"),a.vc(12),a.Ob(),a.Pb(13,"td"),a.vc(14),a.Ob(),a.Pb(15,"td"),a.vc(16),a.Ob(),a.Pb(17,"td"),a.vc(18),a.Ob(),a.tc(19,et,3,1,"td",6),a.Pb(20,"td",15),a.tc(21,rt,11,4,"div",6),a.tc(22,nt,8,0,"form",16),a.Ob(),a.Ob()),2&t){const t=e.$implicit,c=a.oc(6),o=a.bc(2);a.yb(2),a.hc("popoverTitle",t.name),a.gc("ngbPopover",c),a.yb(2),a.wc(t.name),a.yb(4),a.wc(t.code),a.yb(2),a.wc(t.description),a.yb(2),a.wc(t.price),a.yb(2),a.wc(t.weigth),a.yb(2),a.wc(t.kind),a.yb(2),a.wc(t.subCategory),a.yb(1),a.gc("ngIf",o.helpService.isInRole("Administrador")||o.helpService.isInRole("Super Administrador")),a.yb(2),a.gc("ngIf",o.helpService.isInRole("Proveedor")||o.helpService.isInRole("Super Administrador")),a.yb(1),a.gc("ngIf",o.helpService.isInRole("Administrador")||o.helpService.isInRole("Super Administrador"))}}function at(t,e){1&t&&(a.Pb(0,"th"),a.vc(1,"Almac\xe9n"),a.Ob())}function st(t,e){if(1&t&&(a.Pb(0,"table",11),a.Pb(1,"thead"),a.Pb(2,"tr"),a.Pb(3,"th"),a.vc(4,"Nombre"),a.Ob(),a.Pb(5,"th"),a.vc(6,"C\xf3digo"),a.Ob(),a.Pb(7,"th"),a.vc(8,"Descripci\xf3n"),a.Ob(),a.Pb(9,"th"),a.vc(10,"Precio"),a.Ob(),a.Pb(11,"th"),a.vc(12,"Peso"),a.Ob(),a.Pb(13,"th"),a.vc(14,"Categor\xeda"),a.Ob(),a.Pb(15,"th"),a.vc(16,"SubCategor\xeda"),a.Ob(),a.tc(17,V,2,0,"th",6),a.Pb(18,"th"),a.vc(19,"Acciones"),a.Ob(),a.Ob(),a.Ob(),a.Pb(20,"tbody"),a.tc(21,bt,23,12,"tr",12),a.Ob(),a.Pb(22,"tfoot"),a.Pb(23,"tr"),a.Pb(24,"th"),a.vc(25,"Nombre"),a.Ob(),a.Pb(26,"th"),a.vc(27,"C\xf3digo"),a.Ob(),a.Pb(28,"th"),a.vc(29,"Descripci\xf3n"),a.Ob(),a.Pb(30,"th"),a.vc(31,"Precio"),a.Ob(),a.Pb(32,"th"),a.vc(33,"Peso"),a.Ob(),a.Pb(34,"th"),a.vc(35,"Categor\xeda"),a.Ob(),a.Pb(36,"th"),a.vc(37,"SubCategor\xeda"),a.Ob(),a.tc(38,at,2,0,"th",6),a.Pb(39,"th"),a.vc(40,"Acciones"),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&t){const t=a.bc();a.yb(17),a.gc("ngIf",t.helpService.isInRole("Administrador")||t.helpService.isInRole("Super Administrador")),a.yb(4),a.gc("ngForOf",t.products),a.yb(17),a.gc("ngIf",t.helpService.isInRole("Administrador")||t.helpService.isInRole("Super Administrador"))}}function dt(t,e){1&t&&(a.Pb(0,"li",42),a.Pb(1,"a",47),a.vc(2,"..."),a.Ob(),a.Ob())}function lt(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",48),a.Zb("click",function(){a.pc(t);const e=a.bc(2);return e.getProducts(e.beforepage-1)}),a.Pb(1,"a",47),a.vc(2),a.Ob(),a.Ob()}if(2&t){const t=a.bc(2);a.yb(2),a.wc(t.beforepage-1)}}function ut(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",48),a.Zb("click",function(){a.pc(t);const e=a.bc(2);return e.getProducts(e.beforepage)}),a.Pb(1,"a",47),a.vc(2),a.Ob(),a.Ob()}if(2&t){const t=a.bc(2);a.yb(2),a.wc(t.beforepage)}}function pt(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",48),a.Zb("click",function(){a.pc(t);const e=a.bc(2);return e.getProducts(e.nextpage)}),a.Pb(1,"a",47),a.vc(2),a.Ob(),a.Ob()}if(2&t){const t=a.bc(2);a.yb(2),a.wc(t.nextpage)}}function gt(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",48),a.Zb("click",function(){a.pc(t);const e=a.bc(2);return e.getProducts(e.nextpage+1)}),a.Pb(1,"a",47),a.vc(2),a.Ob(),a.Ob()}if(2&t){const t=a.bc(2);a.yb(2),a.wc(t.nextpage+1)}}function vt(t,e){1&t&&(a.Pb(0,"li",42),a.Pb(1,"a",47),a.vc(2,"..."),a.Ob(),a.Ob())}function Pt(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",40),a.Pb(1,"ul",41),a.Pb(2,"li",42),a.Pb(3,"a",43),a.Zb("click",function(){return a.pc(t),a.bc().getProducts(1)}),a.vc(4,"\xab"),a.Ob(),a.Ob(),a.tc(5,dt,3,0,"li",44),a.tc(6,lt,3,1,"li",45),a.tc(7,ut,3,1,"li",45),a.Pb(8,"li",46),a.Pb(9,"a",47),a.vc(10),a.Ob(),a.Ob(),a.tc(11,pt,3,1,"li",45),a.tc(12,gt,3,1,"li",45),a.tc(13,vt,3,0,"li",44),a.Pb(14,"li",42),a.Pb(15,"a",43),a.Zb("click",function(){a.pc(t);const e=a.bc();return e.getProducts(e.pages)}),a.vc(16,"\xbb"),a.Ob(),a.Ob(),a.Ob(),a.Ob()}if(2&t){const t=a.bc();a.yb(5),a.gc("ngIf",t.currentPage>3),a.yb(1),a.gc("ngIf",t.currentPage>2),a.yb(1),a.gc("ngIf",t.currentPage>1),a.yb(3),a.wc(t.currentPage),a.yb(1),a.gc("ngIf",t.currentPage<t.pages),a.yb(1),a.gc("ngIf",t.currentPage<t.pages-1),a.yb(1),a.gc("ngIf",t.currentPage<t.pages-2)}}let ft=(()=>{class t{constructor(t,e,c,o,i){this.productService=t,this.route=c,this.helpService=o,this.authService=i,e.placement="right",e.triggers="hover"}ngOnInit(){this.getProducts()}getProducts(t){var e=!1;t||(t=1);for(let c=0;c<this.authService.roles.length;c++){const t=this.authService.roles[c];"Proveedor"!=t.name&&"Super Administrador"!=t.name||(e=!0,c=this.authService.roles.length)}e?this.productService.getProductsPaginated(t).subscribe(t=>{this.products=t.product,this.pages=t.pages,this.currentPage=t.current,this.beforepage=this.currentPage-1,this.nextpage=this.beforepage+2}):this.productService.getProductsAvailableProveedor(t).subscribe(t=>{this.products=t.product,this.pages=t.pages,this.currentPage=t.current,this.beforepage=this.currentPage-1,this.nextpage=this.beforepage+2})}edit(t){console.log(t),this.productService.selectedProduct=t,this.route.navigate(["/product/create"])}activarProd(t){t.active=!0,this.productService.updateProduct(t).subscribe(t=>{console.log(t)},t=>console.log(t))}desactivarProd(t){t.active=!1,this.productService.updateProduct(t).subscribe(t=>{console.log(t)},t=>console.log(t))}deleteProd(t){console.log(t),this.productService.deleteProduct(t).subscribe(t=>{console.log(t),this.getProducts(this.currentPage)},t=>console.log(t))}addStoreProduct(t,e){if(e.storeActive=!0,t.value)var c=parseFloat(t.value);else c=1;var o=c+e.storeAvailability;e.storeAvailability=o,this.productService.updateProduct(e).subscribe(t=>{this.helpService.showNotif("Se a\xf1adieron "+c+" "+e.name+" al Almac\xe9n. Hay "+o+" en el Almac\xe9n.")},t=>console.log(t))}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(s.a),a.Kb(d.d),a.Kb(l.a),a.Kb(u.a),a.Kb(W.a))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-list-products"]],features:[a.xb([d.d])],decls:10,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"fas","fa-stream","mr-1"],["class","btn btn-primary","style","float: right;",3,"routerLink",4,"ngIf"],[1,"card-body"],[4,"ngIf"],["id","example1","class","table table-bordered table-striped",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"btn","btn-primary",2,"float","right",3,"routerLink"],[1,"nav-icon","fas","fa-plus"],["id","example1",1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[3,"ngbPopover","popoverTitle"],["imagen",""],[2,"width","200px"],[3,"submit",4,"ngIf"],["width","100%","height","100%","alt","",3,"src"],["ngbPopover","Disponible en el Almac\xe9n",1,"badge","badge-primary",2,"font-size","15px"],["data-toggle","tooltip","style","font-size:15px; cursor: pointer;","title","Producto disponible","class","badge badge-primary mb-1",3,"click",4,"ngIf"],["data-toggle","tooltip","style","font-size:15px; cursor: pointer;","title","Producto no disponible","class","badge badge-danger mb-1",3,"click",4,"ngIf"],["type","checkbox",1,"checkbox","d-none",3,"ngModel","ngModelChange"],["checkbox",""],[1,"far","fa-edit",2,"font-size","18px","cursor","pointer","margin-left","5%","margin-right","5%",3,"click"],["popoverTitle","Alerta!","placement","top","triggers","manual",3,"ngbPopover","click"],["p","ngbPopover"],[1,"far","fa-trash-alt",2,"font-size","18px","cursor","pointer"],["delete",""],["data-toggle","tooltip","title","Producto disponible",1,"badge","badge-primary","mb-1",2,"font-size","15px","cursor","pointer",3,"click"],["data-toggle","tooltip","title","Producto no disponible",1,"badge","badge-danger","mb-1",2,"font-size","15px","cursor","pointer",3,"click"],[2,"text-align","center"],[1,"btn","btn-danger","mr-3","ml-3",3,"click"],[1,"btn","btn-dark"],[3,"submit"],[1,"row"],[1,"input-group","price"],["type","number","name","cant","placeholder","0",1,"form-control",2,"height","35px"],["cantidad",""],[1,"input-group-append"],["type","submit",1,"btn","btn-primary",2,"height","35px"],[1,"card-footer"],[1,"pagination","pagination-md",2,"float","right"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",4,"ngIf"],["class","page-item",3,"click",4,"ngIf"],[1,"page-item","active"],[1,"page-link"],[1,"page-item",3,"click"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Pb(1,"div",1),a.Pb(2,"h3",2),a.Lb(3,"i",3),a.vc(4,"Listado de Productos"),a.Ob(),a.tc(5,Y,3,2,"button",4),a.Ob(),a.Pb(6,"div",5),a.tc(7,B,2,0,"div",6),a.tc(8,st,41,3,"table",7),a.Ob(),a.tc(9,Pt,17,7,"div",8),a.Ob()),2&t&&(a.yb(5),a.gc("ngIf",e.helpService.isInRole("Proveedor")),a.yb(2),a.gc("ngIf",e.products.length<1),a.yb(1),a.gc("ngIf",e.products.length>0),a.yb(1),a.gc("ngIf",e.products.length>0))},directives:[i.j,l.b,i.i,d.c,p.a,p.k,p.n,p.u,p.l,p.m],styles:[".page-item[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();var ht=c("Ltw2"),mt=c("K9ho");function Ot(t,e){if(1&t){const t=a.Qb();a.Pb(0,"img",50),a.Zb("click",function(){return a.pc(t),a.bc(),a.oc(34).click()}),a.Ob()}if(2&t){const t=a.bc();a.gc("src",t.photoSelected||"assets/img/no-image.png",a.qc)}}function yt(t,e){if(1&t){const t=a.Qb();a.Pb(0,"img",50),a.Zb("click",function(){return a.pc(t),a.bc(),a.oc(34).click()}),a.Ob()}if(2&t){const t=a.bc();a.gc("src",t.photoSelected||"http://localhost:3000/"+t.productService.selectedProduct.picture,a.qc)}}function St(t,e){if(1&t&&a.Lb(0,"app-ayuda",51),2&t){a.bc();const t=a.oc(24);a.gc("errors",t.errors)}}function It(t,e){if(1&t&&a.Lb(0,"app-ayuda",51),2&t){a.bc();const t=a.oc(28);a.gc("errors",t.errors)}}function kt(t,e){if(1&t&&a.Lb(0,"app-ayuda",51),2&t){a.bc();const t=a.oc(34);a.gc("errors",t.errors)}}function wt(t,e){if(1&t&&a.Lb(0,"app-ayuda",52),2&t){a.bc();const t=a.oc(44);a.gc("errors",t.errors)("tipocampo","numero")}}function Ct(t,e){if(1&t&&a.Lb(0,"app-ayuda",51),2&t){a.bc();const t=a.oc(48);a.gc("errors",t.errors)}}function xt(t,e){if(1&t){const t=a.Qb();a.Pb(0,"option",53),a.Zb("click",function(){a.pc(t);const e=a.bc();return e.getSubCategories(e.items.name)}),a.vc(1),a.Ob()}if(2&t){const t=a.bc();a.yb(1),a.xc(" ",t.productService.selectedProduct.kind," ")}}function Mt(t,e){if(1&t){const t=a.Qb();a.Pb(0,"option",53),a.Zb("click",function(){a.pc(t);const c=e.$implicit;return a.bc().getSubCategories(c.name)}),a.vc(1),a.Ob()}if(2&t){const t=e.$implicit;a.yb(1),a.xc("",t.name," ")}}function At(t,e){if(1&t&&(a.Pb(0,"option"),a.vc(1),a.Ob()),2&t){const t=a.bc();a.yb(1),a.xc("",t.productService.selectedProduct.subCategory," ")}}function Zt(t,e){if(1&t&&(a.Pb(0,"div"),a.vc(1),a.Ob()),2&t){const t=a.bc(2).$implicit;a.yb(1),a.xc(" ",t.name," ")}}function Lt(t,e){if(1&t&&(a.Pb(0,"div"),a.tc(1,Zt,2,1,"div",46),a.Ob()),2&t){const t=a.bc().$implicit,e=a.bc();a.yb(1),a.gc("ngIf",e.productService.selectedProduct.subCategory!=t.name)}}function Qt(t,e){if(1&t&&a.vc(0),2&t){const t=a.bc().$implicit;a.wc(t.name)}}function Ft(t,e){if(1&t&&(a.Pb(0,"option"),a.tc(1,Lt,2,1,"div",54),a.tc(2,Qt,1,1,"ng-template",null,55,a.uc),a.Ob()),2&t){const t=a.oc(3),e=a.bc();a.yb(1),a.gc("ngIf",e.productService.selectedProduct._id)("ngIfElse",t)}}function $t(t,e){if(1&t&&(a.Pb(0,"a",56),a.vc(1),a.Ob()),2&t){const t=a.bc();a.yb(1),a.wc(t.error)}}const Nt=[{path:"create",component:(()=>{class t{constructor(t,e,c){this.productService=t,this.nomenclatorService=e,this.helpService=c,this.newFile=!1,this.textoimag="Seleccionar imagen"}ngOnInit(){this.getCategories("Categor\xeda")}Add(t){return t.value.kind?t.value.subCategory?this.file?(this.error=null,void(t.value._id?(t.value.active=this.productService.selectedProduct.active,t.value.storeActive=this.productService.selectedProduct.storeActive,t.value.storeAvailability=this.productService.selectedProduct.storeAvailability,t.value.promotion=this.productService.selectedProduct.promotion,this.newFile?this.productService.updateProductImg(t.value,this.file).subscribe(t=>{this.productService.selectedProduct=new b.a,this.helpService.showNotif("Producto Actualizado con imagen.")},t=>console.log(t)):this.productService.updateProduct(t.value).subscribe(t=>{this.productService.selectedProduct=new b.a,this.helpService.showNotif("Producto Actualizado.")},t=>console.log(t))):(t.value.active=!0,t.value.storeActive=!0,t.value.storeAvailability=0,this.productService.postProduct(t.value,this.file).subscribe(t=>{this.productService.selectedProduct=new b.a,this.photoSelected=null,this.helpService.showNotif("Producto Guardado. Puede crear nuevos productos.")},t=>console.log(t))))):(this.error="Debe seleccionar una Imagen",!1):(this.error="Debe seleccionar una SubCategor\xeda",!1):(this.error="Debe seleccionar una Categor\xeda",!1)}getCategories(t){this.nomenclatorService.getCategories(t).subscribe(t=>{this.categories=t})}getSubCategories(t){"---Categor\xeda---"!=t&&this.nomenclatorService.getCategories(t).subscribe(t=>{this.subcategories=t})}saveImg(t){if(t.target.files&&t.target.files[0]){this.file=t.target.files[0];const e=new FileReader;e.onload=t=>this.photoSelected=e.result,e.readAsDataURL(this.file),this.newFile=!0}}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(s.a),a.Kb(ht.a),a.Kb(u.a))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-create-products"]],decls:69,vars:22,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"nav-icon","fas","fa-plus","mr-1"],[1,"card-body"],[1,"tab-content","p-0"],["id","revenue-chart1",1,"chart","tab-pane","active",2,"position","relative","height","auto"],[1,"row"],[1,"col-lg-5","d-none","d-lg-block"],["class","img-fluid mt-3","style","width: 500px; height: 400px;","alt","",3,"src","click",4,"ngIf"],[1,"col-lg-7"],[1,"p-5"],[1,"text-center"],[1,"h4","text-gray-900","mb-4"],[1,"user",3,"ngSubmit"],["form","ngForm"],[1,"form-group","row"],[1,"col-sm-6","mb-3","mb-sm-0"],["type","text","hidden","","name","_id","id","_id",3,"ngModel","ngModelChange"],["_id","ngModel"],["type","text","placeholder","Nombre del producto","name","name","id","name","required","",1,"form-control","form-control-user",3,"ngModel","ngModelChange"],["name","ngModel"],[3,"errors",4,"ngIf"],[1,"col-sm-6"],["type","text","placeholder","C\xf3digo","name","code","id","code","required","",1,"form-control","form-control-user",3,"ngModel","ngModelChange"],["code","ngModel"],["hidden","",1,"form-group"],[1,"input-group"],[1,"custom-file"],["type","file","id","exampleInputFile","placeholder","Imagen","name","picture","required","",1,"custom-file-input",3,"change"],["picture",""],["for","exampleInputFile",1,"custom-file-label"],[1,"form-group"],["type","text","placeholder","Descripci\xf3n","name","description","id","description",1,"form-control","form-control-user",3,"ngModel","ngModelChange"],["description","ngModel"],["type","number","placeholder","Peso","name","weigth","id","weigth","required","",1,"form-control","form-control-user",3,"ngModel","ngModelChange"],["weigth","ngModel"],[3,"errors","tipocampo",4,"ngIf"],["type","number","placeholder","Precio","name","price","id","price","required","",1,"form-control","form-control-user",3,"ngModel","ngModelChange"],["price","ngModel"],["name","kind",1,"custom-select",3,"ngModel","ngModelChange"],["kind","ngModel"],[3,"click",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["name","subCategory",1,"custom-select",3,"ngModel","ngModelChange"],["subCategory","ngModel"],[4,"ngIf"],[4,"ngFor","ngForOf"],["style","color: red;",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-user","btn-block",3,"disabled"],["alt","",1,"img-fluid","mt-3",2,"width","500px","height","400px",3,"src","click"],[3,"errors"],[3,"errors","tipocampo"],[3,"click"],[4,"ngIf","ngIfElse"],["normal",""],[2,"color","red"]],template:function(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",0),a.Pb(1,"div",1),a.Pb(2,"h4",2),a.Lb(3,"i",3),a.vc(4," Nuevo Producto "),a.Ob(),a.Ob(),a.Pb(5,"div",4),a.Pb(6,"div",5),a.Pb(7,"div",6),a.Pb(8,"div",7),a.Pb(9,"div",8),a.tc(10,Ot,1,1,"img",9),a.tc(11,yt,1,1,"img",9),a.Ob(),a.Pb(12,"div",10),a.Pb(13,"div",11),a.Pb(14,"div",12),a.Pb(15,"h1",13),a.vc(16,"Crear Producto!"),a.Ob(),a.Ob(),a.Pb(17,"form",14,15),a.Zb("ngSubmit",function(){a.pc(t);const c=a.oc(18);return e.Add(c)}),a.Pb(19,"div",16),a.Pb(20,"div",17),a.Pb(21,"input",18,19),a.Zb("ngModelChange",function(t){return e.productService.selectedProduct._id=t}),a.Ob(),a.Pb(23,"input",20,21),a.Zb("ngModelChange",function(t){return e.productService.selectedProduct.name=t}),a.Ob(),a.tc(25,St,1,1,"app-ayuda",22),a.Ob(),a.Pb(26,"div",23),a.Pb(27,"input",24,25),a.Zb("ngModelChange",function(t){return e.productService.selectedProduct.code=t}),a.Ob(),a.tc(29,It,1,1,"app-ayuda",22),a.Ob(),a.Ob(),a.Pb(30,"div",26),a.Pb(31,"div",27),a.Pb(32,"div",28),a.Pb(33,"input",29,30),a.Zb("change",function(t){return e.saveImg(t)}),a.Ob(),a.Pb(35,"label",31),a.vc(36),a.Ob(),a.tc(37,kt,1,1,"app-ayuda",22),a.Ob(),a.Ob(),a.Ob(),a.Pb(38,"div",32),a.Pb(39,"textarea",33,34),a.Zb("ngModelChange",function(t){return e.productService.selectedProduct.description=t}),a.Ob(),a.Ob(),a.Pb(41,"div",16),a.Pb(42,"div",17),a.Pb(43,"input",35,36),a.Zb("ngModelChange",function(t){return e.productService.selectedProduct.weigth=t}),a.Ob(),a.tc(45,wt,1,2,"app-ayuda",37),a.Ob(),a.Pb(46,"div",23),a.Pb(47,"input",38,39),a.Zb("ngModelChange",function(t){return e.productService.selectedProduct.price=t}),a.Ob(),a.tc(49,Ct,1,1,"app-ayuda",22),a.Ob(),a.Ob(),a.Pb(50,"div",16),a.Pb(51,"div",17),a.Pb(52,"div",32),a.Pb(53,"select",40,41),a.Zb("ngModelChange",function(t){return e.productService.selectedProduct.kind=t}),a.Pb(55,"option"),a.vc(56,"---Categor\xeda---"),a.Ob(),a.tc(57,xt,2,1,"option",42),a.tc(58,Mt,2,1,"option",43),a.Ob(),a.Ob(),a.Ob(),a.Pb(59,"div",23),a.Pb(60,"select",44,45),a.Zb("ngModelChange",function(t){return e.productService.selectedProduct.subCategory=t}),a.Pb(62,"option"),a.vc(63,"---SubCategor\xeda---"),a.Ob(),a.tc(64,At,2,1,"option",46),a.tc(65,Ft,4,2,"option",47),a.Ob(),a.Ob(),a.Ob(),a.tc(66,$t,2,1,"a",48),a.Pb(67,"button",49),a.vc(68," A\xf1adir Producto "),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()}if(2&t){const t=a.oc(18),c=a.oc(24),o=a.oc(28),i=a.oc(34),r=a.oc(44),n=a.oc(48);a.yb(10),a.gc("ngIf",!e.productService.selectedProduct.picture),a.yb(1),a.gc("ngIf",e.productService.selectedProduct.picture),a.yb(10),a.gc("ngModel",e.productService.selectedProduct._id),a.yb(2),a.gc("ngModel",e.productService.selectedProduct.name),a.yb(2),a.gc("ngIf",c.invalid&&c.touched),a.yb(2),a.gc("ngModel",e.productService.selectedProduct.code),a.yb(2),a.gc("ngIf",o.invalid&&o.touched),a.yb(7),a.wc(e.textoimag),a.yb(1),a.gc("ngIf",i.invalid&&i.touched),a.yb(2),a.gc("ngModel",e.productService.selectedProduct.description),a.yb(4),a.gc("ngModel",e.productService.selectedProduct.weigth),a.yb(2),a.gc("ngIf",r.invalid&&r.touched),a.yb(2),a.gc("ngModel",e.productService.selectedProduct.price),a.yb(2),a.gc("ngIf",n.invalid&&n.touched),a.yb(4),a.gc("ngModel",e.productService.selectedProduct.kind),a.yb(4),a.gc("ngIf",e.productService.selectedProduct._id),a.yb(1),a.gc("ngForOf",e.categories),a.yb(2),a.gc("ngModel",e.productService.selectedProduct.subCategory),a.yb(4),a.gc("ngIf",e.productService.selectedProduct._id),a.yb(1),a.gc("ngForOf",e.subcategories),a.yb(1),a.gc("ngIf",e.error),a.yb(1),a.gc("disabled",t.invalid)}},directives:[i.j,p.u,p.l,p.m,p.b,p.k,p.n,p.r,p.p,p.s,p.o,p.t,i.i,mt.a],styles:[".custom-file-input[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{cursor:pointer}"]}),t})(),canActivate:[(()=>{class t{constructor(t,e){this.authService=t,this.route=e}canActivate(t,e){for(let c=0;c<this.authService.roles.length;c++){const t=this.authService.roles[c];if("Proveedor"==t.name||"Super Administrador"==t.name)return!0}return this.route.navigate(["/auth/login"]),!1}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(W.a),a.Wb(l.a))},t.\u0275prov=a.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]},{path:"",component:ft,canActivate:[r.a]},{path:"category",component:U},{path:"almacen",component:$,canActivate:[n.a]}];let _t=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[l.d.forChild(Nt)],l.d]}),t})(),Rt=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[i.b,_t,p.g,d.a,o.AuthModule]]}),t})()}}]);